<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì‹ ë¹„ì•„íŒŒíŠ¸ ìºë¦­í„° í…ŒìŠ¤íŠ¸</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Pretendard:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
      body { font-family: 'Pretendard', sans-serif; }
      h1, h2, h3, .font-game { font-family: 'Jua', sans-serif; }
      .animate-fade-in { animation: fadeIn 0.5s ease-out; }
      .animate-pop { animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
      @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      @keyframes pop { 0% { transform: scale(0.9); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
      .bg-pattern {
        background-color: #f0f9ff;
        background-image: radial-gradient(#bae6fd 1px, transparent 1px);
        background-size: 20px 20px;
      }
    </style>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body class="bg-pattern text-slate-900 antialiased selection:bg-indigo-500 selection:text-white overflow-x-hidden">
    <div id="root"></div>

    <script type="text/babel">
        // =================================================================
        // 1. ê¸°ë³¸ ì„¤ì • ë° ë°ì´í„° (questions.ts + constants.ts ë‚´ìš© í†µí•©)
        // =================================================================
        const { useState, useCallback, useEffect } = React;
        const { Radar, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, ResponsiveContainer } = Recharts;

        // [questions.ts ë‚´ìš©]
        const questionsData = {
          "EI": [
            { "id": 101, "dimension": "EI", "text": "í•™êµì—ì„œ ê·€ì‹  ì†Œë™ì´ ì¼ì–´ë‚¬ì–´! ì¹œêµ¬ë“¤ì´ ë§‰ ëª¨ì—¬ìˆë„¤?", "options": [{ "text": "ì–˜ë“¤ì•„ ë¬´ìŠ¨ ì¼ì´ì•¼?! (êµ°ì¤‘ ì†ìœ¼ë¡œ íŒŒê³ ë“ ë‹¤)", "value": "E" }, { "text": "ë¬´ìŠ¨ ì¼ì´ì§€...? (ë’¤ì—ì„œ ì¡°ìš©íˆ ìƒí™©ì„ ì§€ì¼œë³¸ë‹¤)", "value": "I" }] },
            { "id": 102, "dimension": "EI", "text": "ì£¼ë§ì— ì‹ ë¹„ì•„íŒŒíŠ¸ ì¹œêµ¬ë“¤ì´ ë‹¤ ê°™ì´ ë†€ìê³  í•œë‹¤!", "options": [{ "text": "ì™„ì „ ì¢‹ì•„! ë‹¹ì¥ ë‚˜ê°ˆ ì¤€ë¹„ ì‹œì‘!", "value": "E" }, { "text": "ì•„... ì´ë²ˆ ì£¼ë§ì€ ì§‘ì—ì„œ ì‰¬ê³  ì‹¶ì€ë°...", "value": "I" }] },
            { "id": 103, "dimension": "EI", "text": "ì „í•™ ì˜¨ ì¹œêµ¬ê°€ í˜¼ì ì•‰ì•„ìˆë‹¤. ë‚˜ì˜ í–‰ë™ì€?", "options": [{ "text": "ì•ˆë…•? ë‚œ êµ¬í•˜ë¦¬ì•¼! (ë¨¼ì € ë§ì„ ê±´ë‹¤)", "value": "E" }, { "text": "ë§ì„ ê±¸ê¹Œ ë§ê¹Œ... (íƒ€ì´ë°ì„ ì°ë‹¤)", "value": "I" }] },
            { "id": 104, "dimension": "EI", "text": "ê³ ìŠ¤íŠ¸ë³¼ì„ ìƒì–´ë²„ë ¸ì–´! ì–´ë–¡í•˜ì§€?", "options": [{ "text": "ì•¼! ë‚´ ê³ ìŠ¤íŠ¸ë³¼ ë³¸ ì‚¬ëŒ ìˆì–´?! (ë™ë„¤ë°©ë„¤ ë¬¼ì–´ë³¸ë‹¤)", "value": "E" }, { "text": "ë§ˆì§€ë§‰ìœ¼ë¡œ ë‘” ê³³ì´ ì–´ë””ë”ë¼... (ê¸°ì–µì„ ë”ë“¬ëŠ”ë‹¤)", "value": "I" }] },
            { "id": 105, "dimension": "EI", "text": "ì¹œêµ¬ ìƒì¼ íŒŒí‹°ì— ì´ˆëŒ€ë°›ì•˜ë‹¤!", "options": [{ "text": "ì˜¤ëŠ˜ì˜ ì£¼ì¸ê³µì€ ë‚˜ì•¼ ë‚˜! ë¶„ìœ„ê¸°ë¥¼ ì£¼ë„í•œë‹¤.", "value": "E" }, { "text": "ì¶•í•˜í•´ì£¼ê³  ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ë©´ì„œ ì¡°ìš©íˆ ì¦ê¸´ë‹¤.", "value": "I" }] }
          ],
          "SN": [
            { "id": 201, "dimension": "SN", "text": "ê·€ì‹ ì„ í‡´ì¹˜í•  ì‘ì „ì„ ì§œì•¼ í•´!", "options": [{ "text": "ì¼ë‹¨ ëˆˆì— ë³´ì´ëŠ” ì•½ì ë¶€í„° ê³µê²©í•˜ì!", "value": "S" }, { "text": "ì € ê·€ì‹ ì—ê²Œ ìˆ¨ê²¨ì§„ ì‚¬ì—°ì´ ìˆì§€ ì•Šì„ê¹Œ?", "value": "N" }] },
            { "id": 202, "dimension": "SN", "text": "ì‹ ë¹„ê°€ ìƒˆë¡œìš´ ìš”ìˆ ì„ ë³´ì—¬ì¤¬ë‹¤!", "options": [{ "text": "ìš°ì™€! ë°©ë§ì´ì—ì„œ ë¹›ì´ ë‚¬ì–´!", "value": "S" }, { "text": "ì € ìš”ìˆ ì€ ì–´ë–¤ ì›ë¦¬ë¡œ ì‘ë™í•˜ëŠ” ê±¸ê¹Œ?", "value": "N" }] },
            { "id": 203, "dimension": "SN", "text": "ì§€í•˜êµ­ëŒ€ì ì„ ë¬¼ë¦¬ì¹˜ëŸ¬ ê°€ëŠ” ê¸¸ì„ ì„¤ëª…í•  ë•Œ?", "options": [{ "text": "ì§ì§„í•´ì„œ ë‘ ë²ˆì§¸ ê³¨ëª©ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ êº¾ì–´.", "value": "S" }, { "text": "ì €ê¸° ìŒì‚°í•œ ê¸°ìš´ì´ ëŠê»´ì§€ëŠ” ìª½ìœ¼ë¡œ ê°€ë©´ ë¼!", "value": "N" }] },
            { "id": 204, "dimension": "SN", "text": "ê°•ë¦¼ì´ê°€ ë¬´ì–¸ê°€ ê³ ë¯¼í•˜ëŠ” ê²ƒ ê°™ë‹¤.", "options": [{ "text": "í‘œì •ì´ ì•ˆ ì¢‹ë„¤. ë¬´ìŠ¨ ì¼ ìˆë‚˜?", "value": "S" }, { "text": "í˜¹ì‹œ ë˜ í‘í™”í•˜ëŠ” ê±´ ì•„ë‹ˆê² ì§€? (ìƒìƒì˜ ë‚˜ë˜)", "value": "N" }] },
            { "id": 205, "dimension": "SN", "text": "ë–¡ë³¶ì´ë¥¼ ë§Œë“¤ ë•Œ ë‚˜ëŠ”?", "options": [{ "text": "ë ˆì‹œí”¼ì— ì íŒ ì •ëŸ‰ëŒ€ë¡œ ë„£ëŠ”ë‹¤.", "value": "S" }, { "text": "ì´ê±° ë„£ìœ¼ë©´ ë” ë§›ìˆì„ ê²ƒ ê°™ì€ë°? ê°ìœ¼ë¡œ ë„£ëŠ”ë‹¤.", "value": "N" }] }
          ],
          "TF": [
            { "id": 301, "dimension": "TF", "text": "í˜„ìš°ê°€ ê·€ì‹  ë•Œë¬¸ì— ë¬´ì„œì›Œì„œ ìš¸ê³  ìˆë‹¤.", "options": [{ "text": "ìš¸ì§€ ë§ˆ. ì´ ë¶€ì ì´ ìˆìœ¼ë©´ ì•ˆì „í•´. (í•´ê²°ì±…)", "value": "T" }, { "text": "ë§ì´ ë¬´ì„œì› êµ¬ë‚˜... ë‚´ê°€ ì§€ì¼œì¤„ê²Œ. (ê³µê°)", "value": "F" }] },
            { "id": 302, "dimension": "TF", "text": "ì¹œêµ¬ê°€ ì—‰ëš±í•œ ê·€ì‹  ì´ì•¼ê¸°ë¥¼ í•œë‹¤.", "options": [{ "text": "ì•¼, ê·¸ê±´ ë§ì´ ì•ˆ ë˜ì–ì•„. (íŒ©íŠ¸ ì²´í¬)", "value": "T" }, { "text": "ì§„ì§œ? ìš°ì™€ ëŒ€ë°•ì´ë‹¤! (ë¦¬ì•¡ì…˜)", "value": "F" }] },
            { "id": 303, "dimension": "TF", "text": "ë‘ë¦¬ê°€ ë„˜ì–´ì ¸ì„œ ë¬´ë¦ì´ ê¹Œì¡Œë‹¤.", "options": [{ "text": "ë¹¨ë¦¬ ë³´ê±´ì‹¤ ê°€ì„œ ì†Œë…í•˜ì.", "value": "T" }, { "text": "ê´œì°®ì•„? ë§ì´ ì•„í”„ì§€? ã… ã… ", "value": "F" }] },
            { "id": 304, "dimension": "TF", "text": "ê·€ì‹ ì„ ë¬¼ë¦¬ì¹˜ê³  ë‚˜ì„œ ë“  ìƒê°ì€?", "options": [{ "text": "ì´ë²ˆ ì‘ì „ì€ ì•„ì£¼ ì„±ê³µì ì´ì—ˆì–´.", "value": "T" }, { "text": "ê·€ì‹ ë„ ì´ì œ í¸ì•ˆí•´ì¡Œê² ì§€? ë‹¤í–‰ì´ë‹¤.", "value": "F" }] },
            { "id": 305, "dimension": "TF", "text": "ì¹œêµ¬ê°€ ë‚˜í•œí…Œ í™”ë¥¼ ë‚¸ë‹¤.", "options": [{ "text": "ë‚´ê°€ ë­˜ ì˜ëª»í–ˆì§€? ì´ìœ ë¥¼ ë¶„ì„í•œë‹¤.", "value": "T" }, { "text": "ë‚˜í•œí…Œ í™”ë‚´ë‹ˆê¹Œ ë„ˆë¬´ ì†ìƒí•˜ë‹¤...", "value": "F" }] }
          ],
          "JP": [
            { "id": 401, "dimension": "JP", "text": "ë°©í•™ ìˆ™ì œê°€ ì‚°ë”ë¯¸ì²˜ëŸ¼ ìŒ“ì˜€ë‹¤!", "options": [{ "text": "ê³„íší‘œë¥¼ ì§œì„œ ì˜¤ëŠ˜ë¶€í„° ì°¨ê·¼ì°¨ê·¼ í•œë‹¤.", "value": "J" }, { "text": "ì¼ë‹¨ ë†€ê³ ! ìˆ™ì œëŠ” ê°œí•™ ì „ë‚ ì˜ ë‚˜ì—ê²Œ ë§¡ê¸´ë‹¤.", "value": "P" }] },
            { "id": 402, "dimension": "JP", "text": "ê·€ì‹ ì„ ì¡ìœ¼ëŸ¬ ê°ˆ ë•Œ ì¤€ë¹„ëŠ”?", "options": [{ "text": "ë¶€ì , ê³ ìŠ¤íŠ¸ë³¼, ë¹„ìƒì•½ê¹Œì§€ ì™„ë²½í•˜ê²Œ ì±™ê¸´ë‹¤.", "value": "J" }, { "text": "ì¼ë‹¨ ê³ ìŠ¤íŠ¸ë³¼ë§Œ ìˆìœ¼ë©´ ë˜ì§€! ê°€ì!", "value": "P" }] },
            { "id": 403, "dimension": "JP", "text": "ì¹œêµ¬ë“¤ê³¼ ë†€ëŸ¬ ê°€ê¸°ë¡œ í–ˆë‹¤.", "options": [{ "text": "ëª‡ ì‹œì— ì–´ë””ì„œ ë­ í• ì§€ ë¯¸ë¦¬ ì •í•œë‹¤.", "value": "J" }, { "text": "ì¼ë‹¨ ë§Œë‚˜ì„œ í•˜ê³  ì‹¶ì€ ê±° í•˜ì!", "value": "P" }] },
            { "id": 404, "dimension": "JP", "text": "ê°‘ìê¸° ê·€ì‹ ì´ íŠ€ì–´ë‚˜ì™”ë‹¤!", "options": [{ "text": "ì˜ˆìƒì¹˜ ëª»í•œ ìƒí™©ì´ë¼ ë‹¹í™©ìŠ¤ëŸ½ë‹¤. (ê³„íš íŒŒê´´)", "value": "J" }, { "text": "ì˜¤í˜¸, ì´ ë…€ì„ ë´ë¼? ì¼ë‹¨ ë¤ë²¼! (ìœµí†µì„±)", "value": "P" }] },
            { "id": 405, "dimension": "JP", "text": "ë°© ì²­ì†Œë¥¼ í•œë‹¤ë©´?", "options": [{ "text": "ë‚  ì¡ê³  êµ¬ì„êµ¬ì„ ê¹¨ë—í•˜ê²Œ ì •ë¦¬í•œë‹¤.", "value": "J" }, { "text": "ì§€ì €ë¶„í•œ ê²ƒë§Œ ëŒ€ì¶© ì¹¨ëŒ€ ë°‘ìœ¼ë¡œ ë°€ì–´ ë„£ëŠ”ë‹¤.", "value": "P" }] }
          ]
        };

        // [constants.ts ë‚´ìš© í†µí•©]
        const QUESTION_POOL = questionsData;
        const CHARACTERS = {
          ESTP: { id: 'hari', name: "êµ¬í•˜ë¦¬", mbti: "ESTP", catchphrase: "ë‚´ ì¹œêµ¬ ê±´ë“œë¦¬ë©´ ê°€ë§Œ ì•ˆ ë‘¬!", description: "ìš©ê°í•˜ê³  í–‰ë™ë ¥ì´ ë„˜ì¹˜ëŠ” ë‹¹ì‹ ! ë¶ˆì˜ë¥¼ ë³´ë©´ ì°¸ì§€ ëª»í•˜ëŠ” ì •ì˜ì˜ ì‚¬ë„ì…ë‹ˆë‹¤. ìƒê°ë³´ë‹¤ ëª¸ì´ ë¨¼ì € ë‚˜ê°€ëŠ” ìŠ¤íƒ€ì¼ì´ì§€ë§Œ, íŠ¹ìœ ì˜ ë¦¬ë”ì‹­ìœ¼ë¡œ ì¹œêµ¬ë“¤ì„ ì´ë•ë‹ˆë‹¤.", tags: ["ê°•ì² ì‹¬ì¥", "ì˜ë¦¬íŒŒ", "í–‰ë™ëŒ€ì¥"], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Hari&clothing=hoodie&hair=longHair&hairColor=brown&skinColor=light", bestMatch: "ISFJ", worstMatch: "INFJ" },
          ESFP: { id: 'shinbi', name: "ì‹ ë¹„", mbti: "ESFP", catchphrase: "ê¹¹ê¹¹! ë‚´ê°€ ë°”ë¡œ ìœ„ëŒ€í•œ ë„ê¹¨ë¹„ ì‹ ë¹„ë‹˜ì´ë‹¤!", description: "ì²œì§„ë‚œë§Œí•˜ê³  ì£¼ëª©ë°›ê¸°ë¥¼ ì¢‹ì•„í•˜ëŠ” ë‹¹ì‹ ! ë¶„ìœ„ê¸° ë©”ì´ì»¤ ì—­í• ì„ í†¡í†¡íˆ í•´ëƒ…ë‹ˆë‹¤. ë¨¹ëŠ” ê²ƒê³¼ ë…¸ëŠ” ê²ƒì„ ì œì¼ ì¢‹ì•„í•˜ì§€ë§Œ, ì¹œêµ¬ë¥¼ ì•„ë¼ëŠ” ë§ˆìŒë§Œì€ ëˆ„êµ¬ë³´ë‹¤ í½ë‹ˆë‹¤.", tags: ["ìŠˆí¼ì¸ì‹¸", "ë„ê¹¨ë¹„", "ì¥ë‚œê¾¸ëŸ¬ê¸°"], imageUrl: "https://api.dicebear.com/9.x/bottts-neutral/svg?seed=Shinbi&backgroundColor=54d7c7", bestMatch: "ISTJ", worstMatch: "INTJ" },
          ENTP: { id: 'geumbi', name: "ê¸ˆë¹„", mbti: "ENTP", catchphrase: "ë‚´ ë§ ì¢€ ë“¤ì–´ë³´ë˜ì´~!", description: "ì•„ëŠ” ê²ƒë„ ë§ê³  ë§ë„ ì˜í•˜ëŠ” ë‹¹ì‹ ! ë…¼ë¦¬ì ì´ê³  í˜„ì‹¤ì ì¸ ì¡°ì–¸ì„ ì˜ í•´ì¤ë‹ˆë‹¤. ê°€ë”ì€ ë„ˆë¬´ ì†”ì§í•´ì„œ íŒ©íŠ¸ í­ê²©ì„ ë‚ ë¦¬ê¸°ë„ í•˜ì§€ë§Œ, ë¯¸ì›Œí•  ìˆ˜ ì—†ëŠ” ë§¤ë ¥ì˜ ì†Œìœ ìì…ë‹ˆë‹¤.", tags: ["ì‚¬íˆ¬ë¦¬ìš”ì •", "ë¸Œë ˆì¸", "íŒ©íŠ¸í­ê²©"], imageUrl: "https://api.dicebear.com/9.x/bottts-neutral/svg?seed=Geumbi&backgroundColor=fcd34d", bestMatch: "INFJ", worstMatch: "ISFJ" },
          ENFP: { id: 'hyunwoo', name: "ê¹€í˜„ìš°", mbti: "ENFP", catchphrase: "ëŒ€ë°•! ì´ê±° ì™„ì „ ë¯¸ìŠ¤í„°ë¦¬ ì‚¬ê±´ ì•„ë‹ˆì•¼?", description: "í˜¸ê¸°ì‹¬ ì²œêµ­! ìƒˆë¡œìš´ ê²ƒì´ë¼ë©´ ëˆˆì´ ë°˜ì§ì´ëŠ” ë‹¹ì‹ . ìƒìƒë ¥ì´ í’ë¶€í•˜ê³  ë¦¬ì•¡ì…˜ì´ ì¢‹ì•„ ì£¼ë³€ì— í•­ìƒ ì¹œêµ¬ë“¤ì´ ë§ìŠµë‹ˆë‹¤. ê°€ë” ì—‰ëš±í•œ ì†Œë¦¬ë¥¼ í•˜ì§€ë§Œ ê·¸ê²Œ ë‹¹ì‹ ì˜ ë§¤ë ¥!", tags: ["ì •ë³´í†µ", "ë¦¬ì•¡ì…˜ì™•", "í˜¸ê¸°ì‹¬ëŒ€ì¥"], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Hyunwoo&glasses=round&hair=shortHair&clothing=graphicShirt", bestMatch: "INTJ", worstMatch: "ISTJ" },
          ESTJ: { id: 'guidohyun', name: "ê·€ë„ í˜„", mbti: "ESTJ", catchphrase: "ì„ë¬´ë¥¼ ì™„ìˆ˜í•˜ê² ë‹¤.", description: "ì² ì €í•˜ê³  ê³„íšì ì¸ ë‹¹ì‹ ! ëª©í‘œë¥¼ ì„¸ìš°ë©´ ë°˜ë“œì‹œ ì´ë¤„ë‚´ëŠ” ê°•í•œ ì˜ì§€ì˜ ì†Œìœ ìì…ë‹ˆë‹¤. ë¦¬ë”ì‹­ì´ ìˆê³  ì±…ì„ê°ì´ ê°•í•´ ì–´ë””ì„œë“  ë“ ë“ í•œ ì¡´ì¬ê°€ ë˜ì–´ì¤ë‹ˆë‹¤.", tags: ["ì¹´ë¦¬ìŠ¤ë§ˆ", "ê³„íšì ", "ì±…ì„ê°"], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Guido&clothing=blazerAndShirt&facialHair=none", bestMatch: "ISFP", worstMatch: "INFP" },
          ESFJ: { id: 'mom', name: "ìœ ì§€ë¯¸ (í•˜ë¦¬ ì—„ë§ˆ)", mbti: "ESFJ", catchphrase: "ìš°ë¦¬ ê°€ì¡± ë‹¤ì¹˜ë©´ ê°€ë§Œ ì•ˆ ë‘¬!", description: "ë”°ëœ»í•˜ê³  ë°°ë ¤ì‹¬ ë„˜ì¹˜ëŠ” ë‹¹ì‹ ! ì£¼ë³€ ì‚¬ëŒë“¤ì„ ì±™ê¸°ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ê³  ì¡°í™”ë¡œìš´ ë¶„ìœ„ê¸°ë¥¼ ë§Œë“­ë‹ˆë‹¤. í•˜ì§€ë§Œ ì†Œì¤‘í•œ ì‚¬ëŒì´ ìœ„í—˜í•´ì§€ë©´ ëˆ„êµ¬ë³´ë‹¤ ê°•í•´ì§‘ë‹ˆë‹¤.", tags: ["ë‹¤ì •í•¨", "ê°€ì¡±ì‚¬ë‘", "í—Œì‹ "], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Jimi&hair=longHair&clothing=collarAndSweater", bestMatch: "ISFP", worstMatch: "INTP" },
          ENFJ: { id: 'rion', name: "ë¦¬ì˜¨", mbti: "ENFJ", catchphrase: "ë‹¹ì‹ ì„ ì§€ì¼œë“œë¦¬ê² ìŠµë‹ˆë‹¤.", description: "ë¶€ë“œëŸ¬ìš´ ì¹´ë¦¬ìŠ¤ë§ˆë¥¼ ê°€ì§„ ë‹¹ì‹ ! íƒ€ì¸ì˜ ì„±ì¥ì„ ë•ê³  ì„¸ìƒì„ ë” ì¢‹ê²Œ ë§Œë“¤ê³  ì‹¶ì–´ í•©ë‹ˆë‹¤. ì¹œì ˆí•˜ê³  ë§¤ë„ˆê°€ ì¢‹ì•„ ëˆ„êµ¬ì—ê²Œë‚˜ ì¸ê¸°ê°€ ë§ì€ ìŠ¤íƒ€ì¼ì…ë‹ˆë‹¤.", tags: ["ìŠ¤ìœ—ê°€ì´", "ì •ì˜ë¡œì›€", "ì¸ê¸°ë‚¨"], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Rion&hair=shortHair&clothing=shirt&hairColor=blonde", bestMatch: "INFP", worstMatch: "ISTP" },
          ENTJ: { id: 'joobi', name: "ì£¼ë¹„", mbti: "ENTJ", catchphrase: "ê·œì¹™ì„ ì§€ì¼œë¼ ê¿€!", description: "íƒ€ê³ ë‚œ ë¦¬ë”! ì²´ê³„ì ì´ê³  íš¨ìœ¨ì ì¸ ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ë•Œë¡œëŠ” ì—„ê²©í•´ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ, ê·¸ë£¹ì˜ ëª©í‘œë¥¼ ìœ„í•´ ëˆ„êµ¬ë³´ë‹¤ ì—´ì‹¬íˆ ì¼í•˜ëŠ” ì—´ì •ì ì¸ ì„±ê²©ì…ë‹ˆë‹¤.", tags: ["ì½œë¼ê´‘", "ë¦¬ë”ì‹­", "ì² ë‘ì² ë¯¸"], imageUrl: "https://api.dicebear.com/9.x/bottts-neutral/svg?seed=Joobi&backgroundColor=fbbf24", bestMatch: "INFP", worstMatch: "ISFP" },
          ISTJ: { id: 'shinbiguest', name: "ì‹ ë¹„ì•„íŒŒíŠ¸ ê´€ë¦¬ì¸", mbti: "ISTJ", catchphrase: "í—ˆí—ˆ, ì˜¤ëŠ˜ë„ ì†Œë€ìŠ¤ëŸ½êµ¬ë¨¼.", description: "ë¬µë¬µíˆ ìì‹ ì˜ ì¼ì„ í•´ë‚´ëŠ” ë‹¹ì‹ ! ì±…ì„ê°ì´ ê°•í•˜ê³  í˜„ì‹¤ì ì…ë‹ˆë‹¤. íŠ€ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ì§€ ì•Šì§€ë§Œ, ë’¤ì—ì„œ ë¬µë¬µíˆ ì§ˆì„œë¥¼ ìœ ì§€í•˜ëŠ” ì—†ì–´ì„œëŠ” ì•ˆ ë  ì¡´ì¬ì…ë‹ˆë‹¤.", tags: ["ì„±ì‹¤í•¨", "ì›ì¹™ì£¼ì˜", "ëŒë¶€ì²˜"], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Janitor&facialHair=beard&clothing=overall", bestMatch: "ESFP", worstMatch: "ENFP" },
          ISFJ: { id: 'doori', name: "êµ¬ë‘ë¦¬", mbti: "ISFJ", catchphrase: "ëˆ„ë‚˜... ë‚˜ ë¬´ì„œì›Œ...", description: "ë§ˆìŒì´ ì—¬ë¦¬ê³  ë”°ëœ»í•œ ë‹¹ì‹ ! ì‹¸ì›€ì„ ì‹«ì–´í•˜ê³  í‰í™”ë¥¼ ì‚¬ë‘í•©ë‹ˆë‹¤. ê²ì´ ë§ì•„ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ, ì‚¬ì‹¤ì€ ëˆ„êµ¬ë³´ë‹¤ ê¹Šì€ ë°°ë ¤ì‹¬ì„ ê°€ì§„ ì¹˜ìœ ì˜ ì•„ì´ì½˜ì…ë‹ˆë‹¤.", tags: ["ìˆœë‘¥ì´", "ë¨¹ë°©ìš”ì •", "ë°°ë ¤ì™•"], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Doori&clothing=graphicShirt&weight=100", bestMatch: "ESTP", worstMatch: "ENTP" },
          ISTP: { id: 'kanglim', name: "ìµœê°•ë¦¼", mbti: "ISTP", catchphrase: "ë‚´ ì•ì„ ë§‰ì§€ ë§ˆë¼.", description: "ë§ë³´ë‹¤ëŠ” í–‰ë™ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ë‹¹ì‹ ! ë„êµ¬ ì‚¬ìš©ì— ëŠ¥ìˆ™í•˜ê³  ìœ„ê¸° ìƒí™©ì—ì„œ ì¹¨ì°©í•©ë‹ˆë‹¤. í˜¼ì ìˆëŠ” ê²ƒì„ ì¦ê¸°ë©°, ì¿¨í•œ ë§¤ë ¥ìœ¼ë¡œ ì£¼ë³€ ì‚¬ëŒë“¤ì„ ì‚¬ë¡œì¡ìŠµë‹ˆë‹¤.", tags: ["ê°•ë¦¼ì²˜ì‚¬", "ë§ˆì´ì›¨ì´", "í•´ê²°ì‚¬"], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Kanglim&clothing=blazerAndShirt&hair=black&skinColor=pale", bestMatch: "ESFJ", worstMatch: "ENFJ" },
          ISFP: { id: 'sara', name: "ì‚¬ë¼", mbti: "ISFP", catchphrase: "ë‚œ ê·¸ì € ì¡°ìš©íˆ ì‚´ê³  ì‹¶ì„ ë¿ì´ì•¼.", description: "ììœ ë¡œìš´ ì˜í˜¼ì˜ ì†Œìœ ì! ì˜ˆìˆ ì  ê°ê°ì´ ë›°ì–´ë‚˜ê³  ê°ìˆ˜ì„±ì´ í’ë¶€í•©ë‹ˆë‹¤. í‹€ì— ë°•íŒ ê²ƒì„ ì‹«ì–´í•˜ê³  ìì‹ ì˜ ê°€ì¹˜ê´€ì— ë”°ë¼ ì‚´ì•„ê°€ëŠ” ì—´ì •ì ì¸ ì‚¬ëŒì…ë‹ˆë‹¤.", tags: ["ì˜ˆìˆ ê°€", "ë”°ëœ»í•¨", "ììœ ì¸"], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Sara&hair=longHair&clothing=graphicShirt&hairColor=red", bestMatch: "ESTJ", worstMatch: "ENTJ" },
          INTJ: { id: 'aegis', name: "ì•„ì´ê¸°ìŠ¤ ëŒ€ì¥", mbti: "INTJ", catchphrase: "ëª¨ë“  ê²ƒì€ ê³„íšëŒ€ë¡œ.", description: "ì „ëµì ì´ê³  ë¶„ì„ì ì¸ ë‹¹ì‹ ! ì „ì²´ì ì¸ ê·¸ë¦¼ì„ ë³´ëŠ” í†µì°°ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ê°ì •ì— íœ˜ë‘˜ë¦¬ì§€ ì•Šê³  ëƒ‰ì² í•˜ê²Œ íŒë‹¨í•˜ì—¬ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ” ì™„ë²½ì£¼ì˜ì ì„±í–¥ì´ ìˆìŠµë‹ˆë‹¤.", tags: ["ì „ëµê°€", "ëƒ‰ì² í•¨", "ë…ë¦½ì "], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Aegis&clothing=blazer&glasses=kurt", bestMatch: "ENFP", worstMatch: "ESFP" },
          INTP: { id: 'gaeun', name: "ì´ê°€ì€", mbti: "INTP", catchphrase: "ì±…ì—ì„œ ë´¤ì–´. ì´ê±´ ì•„ë§ˆ...", description: "ì§€ì  í˜¸ê¸°ì‹¬ì´ ë„˜ì¹˜ëŠ” ë‹¹ì‹ ! ì¡°ìš©í•´ ë³´ì´ì§€ë§Œ ë¨¸ë¦¿ì†ì€ ì–¸ì œë‚˜ ìƒˆë¡œìš´ ìƒê°ìœ¼ë¡œ ê°€ë“ ì°¨ ìˆìŠµë‹ˆë‹¤. ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ì„í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ê³ , í˜¼ìë§Œì˜ ì‹œê°„ì„ ì†Œì¤‘íˆ ì—¬ê¹ë‹ˆë‹¤.", tags: ["ë‡Œì„¹ë…€", "ì°¨ë¶„í•¨", "ê´€ì°°ì"], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Gaeun&hair=longHair&clothing=shirt&hairColor=black", bestMatch: "ENTJ", worstMatch: "ESFJ" },
          INFJ: { id: 'ian', name: "ì´ì•ˆ", mbti: "INFJ", catchphrase: "ê¸°ë‹¤ë¦´ê²Œ, ì˜ì›íˆ.", description: "ì‹ ë¹„ë¡­ê³  í†µì°°ë ¥ ìˆëŠ” ë‹¹ì‹ ! ê²‰ìœ¼ë¡œëŠ” ì¡°ìš©í•´ ë³´ì´ì§€ë§Œ ë‚´ë©´ì€ ë‹¨ë‹¨í•œ ì‹ ë…ìœ¼ë¡œ ê°€ë“ ì°¨ ìˆìŠµë‹ˆë‹¤. íƒ€ì¸ì˜ ê°ì •ì„ ì˜ ì´í•´í•˜ê³  ê¹Šì´ ìˆëŠ” ê´€ê³„ë¥¼ ë§ºëŠ” ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤.", tags: ["ë±€íŒŒì´ì–´", "ìˆœì •íŒŒ", "í†µì°°ë ¥"], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Ian&hair=shortHair&clothing=blazerAndShirt&skinColor=pale", bestMatch: "ENTP", worstMatch: "ESTP" },
          INFP: { id: 'goodghost', name: "ì°©í•œ ê·€ì‹ ", mbti: "INFP", catchphrase: "ë‚˜ë¥¼ ìŠì§€ ë§ì•„ì¤˜...", description: "ìˆœìˆ˜í•˜ê³  ë‚­ë§Œì ì¸ ë‹¹ì‹ ! ìì‹ ë§Œì˜ ì„¸ê³„ê°€ í™•ê³ í•˜ê³  ì´ìƒì ì¸ ê²ƒì„ ê¿ˆê¿‰ë‹ˆë‹¤. ë§ˆìŒì´ ì—¬ë¦¬ê³  ìƒì²˜ë¥¼ ì˜ ë°›ì§€ë§Œ, ê·¸ë§Œí¼ íƒ€ì¸ì„ ê¹Šì´ ì´í•´í•˜ê³  ìœ„ë¡œí•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤.", tags: ["ëª½ìƒê°€", "ì¹˜ìœ ", "ê°ìˆ˜ì„±"], imageUrl: "https://api.dicebear.com/9.x/avataaars/svg?seed=Ghost&skinColor=pale&clothing=graphicShirt&topOpacity=50", bestMatch: "ENFJ", worstMatch: "ESTJ" }
        };

        // =================================================================
        // 2. ì„œë¹„ìŠ¤ ë¡œì§ (geminiService.ts ë‚´ìš© í†µí•©)
        // =================================================================
        const calculateCharacter = async (result) => {
          await new Promise(resolve => setTimeout(resolve, 1500));
          const type = result.type;
          const character = CHARACTERS[type] || CHARACTERS['ESFP'];
          return character;
        };

        // =================================================================
        // 3. ì»´í¬ë„ŒíŠ¸ (Button.tsx + ProgressBar.tsx)
        // =================================================================
        const Button = ({ children, variant = 'primary', fullWidth = false, className = '', ...props }) => {
          const baseStyles = "px-6 py-3 rounded-xl font-semibold transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-offset-2";
          const variants = {
            primary: "bg-indigo-600 text-white hover:bg-indigo-700 shadow-lg shadow-indigo-200 focus:ring-indigo-500",
            secondary: "bg-white text-slate-700 border border-slate-200 hover:bg-slate-50 hover:border-indigo-300 shadow-sm focus:ring-slate-400",
            outline: "bg-transparent border-2 border-indigo-500 text-indigo-600 hover:bg-indigo-50 focus:ring-indigo-400"
          };
          return (
            <button className={`${baseStyles} ${variants[variant]} ${fullWidth ? 'w-full' : ''} ${className}`} {...props}>
              {children}
            </button>
          );
        };

        const ProgressBar = ({ current, total }) => {
          const percentage = Math.min(100, Math.max(0, (current / total) * 100));
          return (
            <div className="w-full">
              <div className="flex justify-between text-xs font-medium text-slate-500 mb-2">
                <span>Progress</span>
                <span>{current} / {total}</span>
              </div>
              <div className="w-full bg-slate-200 rounded-full h-2.5 overflow-hidden">
                <div className="bg-indigo-600 h-2.5 rounded-full transition-all duration-500 ease-out" style={{ width: `${percentage}%` }}></div>
              </div>
            </div>
          );
        };

        // =================================================================
        // 4. ë©”ì¸ ì•± ë¡œì§ (App.tsx ë‚´ìš© í†µí•©)
        // =================================================================
        
        // Helper Functions
        const shuffleArray = (array) => {
          const newArray = [...array];
          for (let i = newArray.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
          }
          return newArray;
        };

        const generateQuestions = () => {
          const queue = [];
          const categories = ['EI', 'SN', 'TF', 'JP'];
          categories.forEach(cat => {
            const pool = QUESTION_POOL[cat];
            const selected = shuffleArray(pool).slice(0, 3);
            queue.push(...selected);
          });
          return queue;
        };

        const IntroScreen = ({ onStart }) => (
          <div className="flex flex-col items-center justify-center min-h-screen p-6 text-center max-w-2xl mx-auto animate-fade-in bg-[url('https://www.transparenttextures.com/patterns/diamond-upholstery.png')]">
            <div className="mb-8 relative animate-pop">
              <div className="absolute inset-0 bg-green-400 blur-[60px] opacity-40 rounded-full"></div>
              <img 
                src="https://api.dicebear.com/9.x/bottts-neutral/svg?seed=Shinbi&backgroundColor=54d7c7" 
                alt="Shinbi" 
                className="relative w-48 h-48 drop-shadow-2xl hover:scale-105 transition-transform duration-300"
              />
            </div>
            <div className="bg-white/80 backdrop-blur-sm p-8 rounded-3xl shadow-xl border-4 border-white mb-8">
              <h1 className="text-4xl md:text-6xl font-black text-slate-800 mb-2 tracking-tight drop-shadow-sm font-game">
                <span className="text-green-500">ì‹ ë¹„</span>ì•„íŒŒíŠ¸<br/>
                <span className="text-indigo-600 text-3xl md:text-5xl">ìºë¦­í„° í…ŒìŠ¤íŠ¸</span>
              </h1>
              <div className="h-1 w-20 bg-slate-200 mx-auto my-6 rounded-full"></div>
              <p className="text-lg md:text-xl text-slate-600 font-medium leading-relaxed">
                ë‚˜ì™€ ê°€ì¥ ë‹®ì€ ì‹ ë¹„ì•„íŒŒíŠ¸ ìºë¦­í„°ëŠ” ëˆ„êµ¬ì¼ê¹Œ?<br/>
                AI ì—†ì´ 100% ì •ë°€ ë¶„ì„ìœ¼ë¡œ ì•Œì•„ë´…ë‹ˆë‹¤!
              </p>
            </div>
            <Button onClick={onStart} className="text-xl px-12 py-5 font-bold rounded-2xl shadow-green-200 bg-green-500 hover:bg-green-600 text-white transform hover:-translate-y-1 transition-all shadow-xl border-b-4 border-green-700 active:border-b-0 active:translate-y-0">
              í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸° ğŸ‘»
            </Button>
          </div>
        );

        const QuestionScreen = ({ questionIndex, totalQuestions, question, onAnswer }) => {
          const hostImage = "https://api.dicebear.com/9.x/avataaars/svg?seed=Hari&clothing=hoodie&hair=longHair&hairColor=brown&skinColor=light&mouth=smile";

          return (
            <div key={question.id} className="min-h-screen flex flex-col items-center bg-slate-50 relative overflow-hidden">
              <div className="absolute inset-0 overflow-hidden pointer-events-none">
                <div className="absolute top-10 left-10 w-32 h-32 bg-indigo-200 rounded-full blur-3xl opacity-30"></div>
                <div className="absolute bottom-10 right-10 w-40 h-40 bg-green-200 rounded-full blur-3xl opacity-30"></div>
              </div>
              <div className="w-full max-w-xl px-6 pt-6 pb-2 z-10 flex flex-col h-screen">
                <div className="mb-4">
                   <ProgressBar current={questionIndex + 1} total={totalQuestions} />
                </div>
                <div className="flex-1 flex flex-col items-center justify-center">
                    <div className="relative w-full mb-6 animate-pop origin-bottom">
                      <div className="bg-white p-6 md:p-8 rounded-[2rem] shadow-xl border-2 border-slate-200 relative z-10">
                        <h2 className="text-xl md:text-2xl font-bold text-slate-800 text-center leading-relaxed font-game break-keep">
                          {question.text}
                        </h2>
                      </div>
                      <div className="absolute -bottom-4 left-1/2 transform -translate-x-1/2 w-8 h-8 bg-white border-r-2 border-b-2 border-slate-200 rotate-45 z-0"></div>
                    </div>
                    <div className="relative z-0 -mt-2 mb-6">
                       <img src={hostImage} alt="Host" className="w-40 h-40 md:w-56 md:h-56 object-contain drop-shadow-xl animate-fade-in"/>
                    </div>
                    <div className="grid gap-4 w-full mt-auto mb-6">
                      {question.options.map((option, idx) => (
                        <Button key={idx} variant="secondary" onClick={() => onAnswer(option.value)} className="text-left w-full py-4 px-6 text-lg font-medium border-2 hover:border-indigo-500 hover:bg-indigo-50 hover:text-indigo-700 transition-all shadow-sm hover:shadow-md rounded-2xl group bg-white/90 backdrop-blur-sm">
                          <span className="flex items-center w-full">
                            <span className="w-8 h-8 rounded-full bg-slate-100 text-slate-500 flex-shrink-0 flex items-center justify-center mr-4 group-hover:bg-indigo-200 group-hover:text-indigo-700 text-sm font-bold transition-colors">{idx === 0 ? 'A' : 'B'}</span>
                            <span className="flex-1">{option.text}</span>
                          </span>
                        </Button>
                      ))}
                    </div>
                </div>
              </div>
            </div>
          );
        };

        const LoadingScreen = () => (
          <div className="min-h-screen flex flex-col items-center justify-center p-6 text-center animate-fade-in bg-white/50">
            <div className="relative w-32 h-32 mb-8">
              <div className="absolute inset-0 border-8 border-slate-100 rounded-full"></div>
              <div className="absolute inset-0 border-8 border-indigo-500 rounded-full border-t-transparent animate-spin"></div>
              <div className="absolute inset-0 flex items-center justify-center text-4xl">ğŸ‘»</div>
            </div>
            <h2 className="text-3xl font-bold text-slate-800 mb-3 font-game">ê³ ìŠ¤íŠ¸ë³¼ ì†Œí™˜ ì¤‘...</h2>
            <p className="text-slate-500 text-lg">ë‹¹ì‹ ì˜ ì˜í˜¼ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
          </div>
        );

        const ResultScreen = ({ result, character, onRetry }) => {
          const chartData = [
            { subject: 'ì™¸í–¥(E)', A: result.scores.E, fullMark: 3 },
            { subject: 'ë‚´í–¥(I)', A: result.scores.I, fullMark: 3 },
            { subject: 'ê°ê°(S)', A: result.scores.S, fullMark: 3 },
            { subject: 'ì§ê´€(N)', A: result.scores.N, fullMark: 3 },
            { subject: 'ì‚¬ê³ (T)', A: result.scores.T, fullMark: 3 },
            { subject: 'ê°ì •(F)', A: result.scores.F, fullMark: 3 },
            { subject: 'íŒë‹¨(J)', A: result.scores.J, fullMark: 3 },
            { subject: 'ì¸ì‹(P)', A: result.scores.P, fullMark: 3 },
          ];

          return (
            <div className="min-h-screen bg-indigo-50 pb-20 animate-fade-in">
              <div className="bg-slate-900 text-white pt-16 pb-32 px-6 rounded-b-[4rem] shadow-2xl relative overflow-hidden">
                <div className="absolute top-0 left-0 w-full h-full opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                <div className="max-w-4xl mx-auto text-center relative z-10">
                  <p className="text-indigo-300 font-bold tracking-widest mb-4 uppercase text-sm">ë‚˜ì˜ ì‹ ë¹„ì•„íŒŒíŠ¸ ìºë¦­í„°ëŠ”?</p>
                  <div className="inline-block relative mb-6">
                     <div className="absolute inset-0 bg-white/20 blur-2xl rounded-full"></div>
                     <img src={character.imageUrl} alt={character.name} className="w-40 h-40 md:w-56 md:h-56 relative z-10 mx-auto drop-shadow-2xl transform hover:scale-105 transition-transform" />
                  </div>
                  <h1 className="text-5xl md:text-7xl font-black mb-2 font-game text-yellow-400 drop-shadow-lg">{character.name}</h1>
                  <div className="inline-block bg-white/10 backdrop-blur-md px-4 py-1 rounded-full border border-white/20 mt-2">
                    <p className="text-xl md:text-2xl font-bold text-white tracking-widest">{character.mbti}</p>
                  </div>
                </div>
              </div>

              <div className="max-w-4xl mx-auto px-6 -mt-24 relative z-20 space-y-8">
                <div className="bg-white rounded-3xl shadow-xl p-8 border-b-8 border-indigo-500 text-center transform hover:-translate-y-1 transition-transform">
                  <p className="text-2xl font-bold text-slate-800 font-game mb-2">"{character.catchphrase}"</p>
                  <div className="flex justify-center gap-2 mt-4">
                    {character.tags.map(tag => (
                      <span key={tag} className="bg-indigo-50 text-indigo-600 px-3 py-1 rounded-lg text-sm font-bold">#{tag}</span>
                    ))}
                  </div>
                </div>

                <div className="bg-white rounded-3xl shadow-lg p-8">
                  <h3 className="text-xl font-bold text-slate-800 mb-4 flex items-center">
                    <span className="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center mr-3 text-xl">ğŸ“œ</span>
                    ì„±ê²© ë¶„ì„
                  </h3>
                  <p className="text-slate-600 leading-loose text-lg whitespace-pre-line">
                    {character.description}
                  </p>
                </div>

                <div className="grid md:grid-cols-2 gap-6">
                   <div className="bg-white rounded-3xl shadow-lg p-6 flex flex-col items-center">
                     <h4 className="text-sm font-bold text-slate-400 uppercase tracking-wider mb-2">ì—ë„ˆì§€ ë¶„í¬</h4>
                     <div className="h-64 w-full">
                        <ResponsiveContainer width="100%" height="100%">
                          <RadarChart cx="50%" cy="50%" outerRadius="70%" data={chartData}>
                            <PolarGrid stroke="#e2e8f0" />
                            <PolarAngleAxis dataKey="subject" tick={{ fill: '#64748b', fontSize: 11, fontWeight: 'bold' }} />
                            <PolarRadiusAxis domain={[0, 3]} tick={false} axisLine={false} />
                            <Radar name="My Type" dataKey="A" stroke="#6366f1" fill="#6366f1" fillOpacity={0.5} />
                          </RadarChart>
                        </ResponsiveContainer>
                     </div>
                   </div>

                   <div className="space-y-6">
                      <div className="bg-green-50 rounded-3xl p-6 border-2 border-green-100 shadow-sm flex items-center justify-between">
                        <div>
                          <p className="text-xs font-bold text-green-600 uppercase mb-1">í™˜ìƒì˜ íŒŒíŠ¸ë„ˆ</p>
                          <p className="text-xl font-black text-slate-800">{character.bestMatch}</p>
                        </div>
                        <div className="text-4xl">ğŸ˜</div>
                      </div>
                      <div className="bg-red-50 rounded-3xl p-6 border-2 border-red-100 shadow-sm flex items-center justify-between">
                        <div>
                          <p className="text-xs font-bold text-red-600 uppercase mb-1">í™˜ì¥ì˜ íŒŒíŠ¸ë„ˆ</p>
                          <p className="text-xl font-black text-slate-800">{character.worstMatch}</p>
                        </div>
                        <div className="text-4xl">ğŸ˜±</div>
                      </div>
                      <div className="bg-white rounded-3xl p-6 shadow-md border border-slate-100">
                        <p className="text-center text-slate-500 text-sm mb-4">ì¹œêµ¬ì—ê²Œ ë‚´ ê²°ê³¼ ê³µìœ í•˜ê¸°</p>
                        <div className="flex gap-2 justify-center">
                           <Button variant="secondary" className="flex-1 py-3 text-sm" onClick={() => alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!')}>ë§í¬ ë³µì‚¬</Button>
                        </div>
                      </div>
                   </div>
                </div>

                <div className="mt-8 text-center pb-8">
                  <Button onClick={onRetry} className="px-12 py-4 text-lg bg-slate-800 hover:bg-slate-900 shadow-lg shadow-slate-300">
                    ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸° ğŸ”„
                  </Button>
                </div>
              </div>
            </div>
          );
        };

        const AppState = {
          INTRO: 0,
          TEST: 1,
          CALCULATING: 2,
          RESULT: 3
        };

        const App = () => {
          const [appState, setAppState] = useState(AppState.INTRO);
          const [questions, setQuestions] = useState([]);
          const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
          const [answers, setAnswers] = useState({ E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 });
          const [finalResult, setFinalResult] = useState(null);
          const [characterResult, setCharacterResult] = useState(null);

          const handleStart = useCallback(() => {
            const newQuestions = generateQuestions();
            setQuestions(newQuestions);
            setAppState(AppState.TEST);
            setCurrentQuestionIndex(0);
            setAnswers({ E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 });
          }, []);

          const handleAnswer = (value) => {
            const newAnswers = { ...answers, [value]: answers[value] + 1 };
            setAnswers(newAnswers);

            if (currentQuestionIndex < questions.length - 1) {
              setCurrentQuestionIndex(prev => prev + 1);
            } else {
              finishTest({ ...answers, [value]: answers[value] + 1 });
            }
          };

          const finishTest = useCallback(async (finalAnswers) => {
            setAppState(AppState.CALCULATING);

            const type = [
              finalAnswers.E >= finalAnswers.I ? 'E' : 'I',
              finalAnswers.S >= finalAnswers.N ? 'S' : 'N',
              finalAnswers.T >= finalAnswers.F ? 'T' : 'F',
              finalAnswers.J >= finalAnswers.P ? 'J' : 'P'
            ].join('');

            const result = {
              type,
              scores: { ...finalAnswers }
            };

            setFinalResult(result);
            const character = await calculateCharacter(result);
            setCharacterResult(character);
            setAppState(AppState.RESULT);
          }, []);

          const handleRetry = () => {
            setAppState(AppState.INTRO);
            setFinalResult(null);
            setCharacterResult(null);
          };

          return (
            <div className="min-h-screen font-sans text-slate-900 bg-slate-50">
              {appState === AppState.INTRO && <IntroScreen onStart={handleStart} />}
              {appState === AppState.TEST && questions.length > 0 && (
                <QuestionScreen 
                  questionIndex={currentQuestionIndex}
                  totalQuestions={questions.length}
                  question={questions[currentQuestionIndex]}
                  onAnswer={handleAnswer}
                />
              )}
              {appState === AppState.CALCULATING && <LoadingScreen />}
              {appState === AppState.RESULT && finalResult && characterResult && (
                <ResultScreen 
                  result={finalResult} 
                  character={characterResult} 
                  onRetry={handleRetry} 
                />
              )}
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
